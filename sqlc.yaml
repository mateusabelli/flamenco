version: "2"
sql:
  - engine: "sqlite"
    schema: "internal/manager/persistence/sqlc/schema.sql"
    queries: "internal/manager/persistence/sqlc/query_jobs.sql"
    gen:
      go:
        out: "internal/manager/persistence/sqlc"
        overrides:
          - db_type: "jsonb"
            go_type:
              import: "encoding/json"
              type: "RawMessage"
          - column: jobs.status
            go_type: { type: "JobStatus", import: "projects.blender.org/studio/flamenco/pkg/api" }
          - column: tasks.status
            go_type: { type: "TaskStatus", import: "projects.blender.org/studio/flamenco/pkg/api" }
          - column: workers.status
            go_type: { type: "WorkerStatus", import: "projects.blender.org/studio/flamenco/pkg/api" }
          - column: workers.status_requested
            go_type: { type: "WorkerStatus", import: "projects.blender.org/studio/flamenco/pkg/api" }
          - column: sleep_schedules.start_time
            go_type: { type: "TimeOfDay", import: "projects.blender.org/studio/flamenco/pkg/time_of_day" }
          - column: sleep_schedules.end_time
            go_type: { type: "TimeOfDay", import: "projects.blender.org/studio/flamenco/pkg/time_of_day" }
        rename:
          uuid: "UUID"
          uuids: "UUIDs"
          jobuuid: "JobUUID"
          taskUUID: "TaskUUID"
          workeruuid: "WorkerUUID"
  - engine: "sqlite"
    schema: "internal/manager/persistence/sqlc/schema.sql"
    queries: "internal/manager/persistence/sqlc/query_workers.sql"
    gen:
      go:
        out: "internal/manager/persistence/sqlc"
        overrides:
          - db_type: "jsonb"
            go_type:
              import: "encoding/json"
              type: "RawMessage"
          - column: jobs.status
            go_type: { type: "JobStatus", import: "projects.blender.org/studio/flamenco/pkg/api" }
          - column: tasks.status
            go_type: { type: "TaskStatus", import: "projects.blender.org/studio/flamenco/pkg/api" }
          - column: workers.status
            go_type: { type: "WorkerStatus", import: "projects.blender.org/studio/flamenco/pkg/api" }
          - column: workers.status_requested
            go_type: { type: "WorkerStatus", import: "projects.blender.org/studio/flamenco/pkg/api" }
          - column: sleep_schedules.start_time
            go_type: { type: "TimeOfDay", import: "projects.blender.org/studio/flamenco/pkg/time_of_day" }
          - column: sleep_schedules.end_time
            go_type: { type: "TimeOfDay", import: "projects.blender.org/studio/flamenco/pkg/time_of_day" }
        rename:
          uuid: "UUID"
          uuids: "UUIDs"
          jobuuid: "JobUUID"
          taskUUID: "TaskUUID"
          workeruuid: "WorkerUUID"
  - engine: "sqlite"
    schema: "internal/manager/persistence/sqlc/schema.sql"
    queries: "internal/manager/persistence/sqlc/query_task_scheduler.sql"
    gen:
      go:
        out: "internal/manager/persistence/sqlc"
        overrides:
          - db_type: "jsonb"
            go_type:
              import: "encoding/json"
              type: "RawMessage"
          - column: jobs.status
            go_type: { type: "JobStatus", import: "projects.blender.org/studio/flamenco/pkg/api" }
          - column: tasks.status
            go_type: { type: "TaskStatus", import: "projects.blender.org/studio/flamenco/pkg/api" }
          - column: workers.status
            go_type: { type: "WorkerStatus", import: "projects.blender.org/studio/flamenco/pkg/api" }
          - column: workers.status_requested
            go_type: { type: "WorkerStatus", import: "projects.blender.org/studio/flamenco/pkg/api" }
          - column: sleep_schedules.start_time
            go_type: { type: "TimeOfDay", import: "projects.blender.org/studio/flamenco/pkg/time_of_day" }
          - column: sleep_schedules.end_time
            go_type: { type: "TimeOfDay", import: "projects.blender.org/studio/flamenco/pkg/time_of_day" }
        rename:
          uuid: "UUID"
          uuids: "UUIDs"
          jobuuid: "JobUUID"
          taskUUID: "TaskUUID"
          workeruuid: "WorkerUUID"
  - engine: "sqlite"
    schema: "internal/worker/persistence/sqlc/schema.sql"
    queries: "internal/worker/persistence/sqlc/query.sql"
    gen:
      go:
        out: "internal/worker/persistence/sqlc"
        overrides:
          - db_type: "jsonb"
            go_type:
              import: "encoding/json"
              type: "RawMessage"
          - column: jobs.status
            go_type: { type: "JobStatus", import: "projects.blender.org/studio/flamenco/pkg/api" }
          - column: tasks.status
            go_type: { type: "TaskStatus", import: "projects.blender.org/studio/flamenco/pkg/api" }
          - column: workers.status
            go_type: { type: "WorkerStatus", import: "projects.blender.org/studio/flamenco/pkg/api" }
          - column: workers.status_requested
            go_type: { type: "WorkerStatus", import: "projects.blender.org/studio/flamenco/pkg/api" }
          - column: sleep_schedules.start_time
            go_type: { type: "TimeOfDay", import: "projects.blender.org/studio/flamenco/pkg/time_of_day" }
          - column: sleep_schedules.end_time
            go_type: { type: "TimeOfDay", import: "projects.blender.org/studio/flamenco/pkg/time_of_day" }
        rename:
          uuid: "UUID"
          uuids: "UUIDs"
          jobuuid: "JobUUID"
          taskUUID: "TaskUUID"
          workeruuid: "WorkerUUID"
